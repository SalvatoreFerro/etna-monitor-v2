{% extends "admin/base.html" %}

{% block content %}
  <section class="admin-section">
    <h1>Copernicus Preview Test</h1>
    <p>Sorgente selezionata: <strong>{{ copernicus_payload.selected_source or 'â€”' }}</strong></p>

    <div class="admin-grid">
      <div class="admin-card">
        <h2>Sentinel-2 (Ottico)</h2>
        {% if copernicus_payload.preview_url_s2 %}
          <img
            src="{{ copernicus_payload.preview_url_s2 }}{% if copernicus_payload.generated_at_epoch %}?v={{ copernicus_payload.generated_at_epoch }}{% endif %}"
            alt="Preview Copernicus Sentinel-2"
            style="max-width: 100%; border-radius: 12px; border: 1px solid rgba(148, 163, 184, 0.35);"
          />
        {% else %}
          <p>Nessuna immagine disponibile.</p>
        {% endif %}
      </div>
      <div class="admin-card">
        <h2>Sentinel-1 (Radar)</h2>
        {% if copernicus_payload.preview_url_s1 %}
          <img
            src="{{ copernicus_payload.preview_url_s1 }}{% if copernicus_payload.generated_at_epoch %}?v={{ copernicus_payload.generated_at_epoch }}{% endif %}"
            alt="Preview Copernicus Sentinel-1"
            style="max-width: 100%; border-radius: 12px; border: 1px solid rgba(148, 163, 184, 0.35);"
          />
        {% else %}
          <p>Nessuna immagine disponibile.</p>
        {% endif %}
      </div>
    </div>

    <h2>Status JSON</h2>
    <pre style="white-space: pre-wrap;">{{ copernicus_status | tojson(indent=2) }}</pre>

    <h2>Log ultimo run</h2>
    <pre style="white-space: pre-wrap;">{{ copernicus_log or 'Nessun log disponibile.' }}</pre>
  </section>
{% endblock %}

{% extends "layout.html" %}
{% block content %}
  <section class="card">
    <h2>Dashboard Settings</h2>
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert alert-{{ category }}">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}
    
    {% if user.premium %}
      <form method="POST">
        <div class="form-group">
          <label for="threshold">Custom Alert Threshold (mV):</label>
          <input type="number" id="threshold" name="threshold" 
                 value="{{ user.threshold or default_threshold }}" 
                 step="0.1" min="0.1" max="100.0" required>
          <small>Range: 0.1 - 100.0 mV</small>
        </div>
        <button type="submit" class="btn btn-primary">Update Threshold</button>
      </form>
    {% else %}
      <p>Premium account required for custom thresholds.</p>
      <p>Current default threshold: <strong>{{ default_threshold }} mV</strong></p>
    {% endif %}
    
    <p><a href="{{ url_for('dashboard.dashboard_home') }}">Back to Dashboard</a></p>
  </section>
{% endblock %}
